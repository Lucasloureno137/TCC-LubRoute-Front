<div class="dashboard-container">
  <div class="page-header">
    <h1 class="page-title">Dashboard</h1>
    <p class="page-subtitle">Bem-vindo</p>
  </div>

  <div class="metrics-row">
    <div class="metric-card" *ngFor="let card of metricCards">
      <div class="metric-icon" [style.background-color]="card.bgColor">
        <i class="material-icons" [style.color]="card.color">{{ card.icon }}</i>
      </div>
      <div class="metric-content">
        <div class="metric-value">{{ card.value }}</div>
        <div class="metric-title">{{ card.title }}</div>
      </div>
    </div>
  </div>

  <div class="content-row">
    <div class="progress-section">
      <div class="card">
        <h3 class="card-title">Progresso do Dia</h3>
        <div class="progress-container">
          <div class="progress-circle">
            <svg width="200" height="200" class="progress-svg">
              <circle
                cx="100"
                cy="100"
                r="80"
                class="progress-bg"
                fill="none"
              ></circle>
              <circle
                cx="100"
                cy="100"
                r="80"
                class="progress-bar"
                fill="none"
                [style.stroke-dasharray]="circumference"
                [style.stroke-dashoffset]="dashOffset"
              ></circle>
            </svg>
            <div class="progress-text">
              <span class="progress-percentage">{{ progressPercentage.toFixed(0) }}%</span>
            </div>
          </div>
          <p class="progress-label">Tarefas concluídas</p>
        </div>
      </div>
    </div>

    <div class="activities-section">
      <div class="card">
        <div class="card-header">
          <h3 class="card-title">Atividades Pendentes de Manutenção</h3>
        </div>
        <div class="table-container">
          <table class="activities-table">
            <thead>
              <tr>
                <th>EQUIPAMENTO</th>
                <th>ATIVIDADE</th>
                <th>CÓDIGO</th>
                <th>PRODUTO</th>
                <th>VENCIMENTO</th>
                <th>STATUS</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let activity of pendingActivities">
                <td class="activity-title">{{ activity.title }}</td>
                <td>{{ activity.atividade }}</td>
                <td>{{ activity.codigo }}</td>
                <td>{{ activity.produto }}</td>
                <td>{{ activity.vencimento }}</td>
                <td>
                  <span
                    class="status-badge"
                    [ngClass]="getStatusClass(activity.status)"
                  >
                    {{ activity.status }}
                  </span>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div class="bottom-row">
    <div class="chart-section">
      <div class="card">
        <h3 class="card-title">Operações executadas por Tipo (Últimos 30 dias)</h3>
        <div class="chart-container">
          <div class="bar-chart">
            <div class="bar-item" *ngFor="let item of operacoesData">
              <div class="bar-label">{{ item.type }}</div>
              <div class="bar-container">
                <div
                  class="bar-fill"
                  [style.width.%]="item.value"
                  [style.background-color]="item.color"
                ></div>
                <span class="bar-value">{{ item.value }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="stock-section">
      <div class="card">
        <h3 class="card-title">Produtos com Baixo Estoque</h3>
        <div class="table-container">
          <table class="stock-table">
            <thead>
              <tr>
                <th>PRODUTO</th>
                <th>QTD ATUAL</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let product of productStock">
                <td>{{ product.produtoNome }}</td>
                <td class="qty-atual">{{ product.quantidadeDisponivel }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
