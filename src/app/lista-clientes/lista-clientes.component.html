<!-- <h1>Filiais Cadastradas</h1>
<div class="container-table">
    <app-tabela [dataLayer]="dataLayer" [displayedColumns]="displayedColumns" [displayedColumnsCast]="displayedColumnsCast" (rowSelected)="selectedRow = $event"></app-tabela>
</div>
<div class="controles-tabela">
    <button mat-raised-button (click)="tabelaControle('ADD')">
        <mat-icon>add</mat-icon>
        Adicionar
    </button>


    <button mat-raised-button (click)="selectedRow == null ? erroAlert() : tabelaControle('EDIT')">
        <mat-icon>edit</mat-icon>
        Editar
    </button>

    <button mat-raised-button color="warn" (click)=" selectedRow == null ? erroAlert() : tabelaControle('DELETE')">
        <mat-icon>delete</mat-icon>
        Excluir
    </button>
</div>
<div class="container-voltar">
    <app-voltar></app-voltar>
</div> -->

<div class="clients-container">
  <div class="page-header">
    <div class="title-section">
      <h1 class="page-title">Clientes Cadastrados</h1>
      <app-breadcrumb
        [items]="breadcrumbItems"
        [showContainer]="false"
      ></app-breadcrumb>
    </div>
    <button class="btn-primary" (click)="tabelaControle('ADD')">
      <i class="material-icons">add</i>
      Adicionar Cliente
    </button>
  </div>

  <div class="content-card">
    <div class="filters-section">
      <h3 class="filters-title">Filtros</h3>
      <div class="search-container">
        <div class="search-box">
          <input
            type="text"
            placeholder="Digite para pesquisar..."
            [(ngModel)]="searchQuery"
            (keyup.enter)="onSearch()"
            class="search-input"
          />
          <button class="search-btn" (click)="onSearch()">
            <i class="material-icons">search</i>
          </button>
        </div>

        <div class="filter-actions">
          <button
            class="btn-secondary"
            (click)="selectedRow == null ? erroAlert() : tabelaControle('EDIT')"
          >
            <i class="material-icons">edit</i>
            Editar
          </button>
          <button
            class="btn-danger"
            (click)="
              selectedRow == null ? erroAlert() : tabelaControle('DELETE')
            "
          >
            <i class="material-icons">delete</i>
            Excluir
          </button>
        </div>
      </div>
    </div>

    <!-- <div class="table-section">
      <div class="table-container">
        <app-tabela
          [dataLayer]="filteredClientes"
          [displayedColumns]="displayedColumns"
          [displayedColumnsCast]="displayedColumnsCast"
          (rowSelected)="selectedRow = $event">
        </app-tabela>

        <div class="empty-state" *ngIf="dataLayer.length === 0">
          <i class="material-icons">people_outline</i>
          <p>Nenhum cliente encontrado</p>
        </div>
      </div>

      <div class="container-voltar">
        <app-voltar></app-voltar>
      </div>
    </div> -->

    <div class="table-section">
      <div class="table-container">
        <table class="users-table">
          <thead>
            <tr>
              <th>N</th>
              <th>NOME</th>
              <th>E-MAIL</th>
              <th>CNPJ</th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let user of getPaginatedClientes()"
              (click)="onRowClick(user)"
              [class.selected]="isSelected(user)"
              class="table-row"
            >
              <td>{{ user.n }}</td>
              <td class="user-name">{{ user.nome }}</td>
              <td class="user-email">{{ user.email }}</td>
              <td>{{ user.cnpj }}</td>
            </tr>
          </tbody>
        </table>

        <div class="empty-state" *ngIf="getPaginatedClientes().length === 0">
          <i class="material-icons">people_outline</i>
          <p>Nenhum usuário encontrado</p>
        </div>
      </div>

      <div class="pagination-container" *ngIf="totalPages > 0">
        <div class="pagination-info">
          <span>Itens por página</span>
          <select
            [(ngModel)]="itemsPerPage"
            (change)="updatePagination(); currentPage = 1"
          >
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="20">20</option>
            <option value="50">50</option>
          </select>
        </div>

        <div class="pagination-controls">
          <button
            class="pagination-btn"
            (click)="onPageChange(1)"
            [disabled]="currentPage === 1"
          >
            <i class="material-icons">first_page</i>
          </button>

          <button
            class="pagination-btn"
            (click)="onPageChange(currentPage - 1)"
            [disabled]="currentPage === 1"
          >
            <i class="material-icons">chevron_left</i>
          </button>

          <button
            *ngFor="let page of getPageNumbers()"
            class="pagination-number"
            [class.active]="page === currentPage"
            (click)="onPageChange(page)"
          >
            {{ page }}
          </button>

          <button
            class="pagination-btn"
            (click)="onPageChange(currentPage + 1)"
            [disabled]="currentPage === totalPages"
          >
            <i class="material-icons">chevron_right</i>
          </button>

          <button
            class="pagination-btn"
            (click)="onPageChange(totalPages)"
            [disabled]="currentPage === totalPages"
          >
            <i class="material-icons">last_page</i>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
